PROP
{
	name = MAS_Tablo_Alarm_GPWS

	MODEL
	{
		model = ASET/ASET_Props/Instruments/TabloIndicator/TabloIndicator
	}

	MODULE
	{
		name = MASComponent

		startupScript = fc.SetPersistent("AVAS_Call_Sound", "ASET/ASET_Props/Sounds/beep_A_long_x1")

		// This prop implements all of the GPWS functionality.
		COLOR_SHIFT
		{
			name = Panel Color
			transform = TabloColorPlate
			activeColor = 255,180,180,255
			passiveColor = 0,0,0,255
			variable = fc.Conditioned(0)
		}

		AUDIO_PLAYER
		{
			name = AVASCallTone
			variableSound = fc.GetPersistent("AVAS_Call_Sound")
			volume = 1.0
			trigger = ON
			mustPlayOnce = true
			variable = fc.Conditioned(fc.GetPersistentAsNumber("AVAS_Annunciation_On"))
		}
		
		TRIGGER_EVENT
		{
			name = AVASCall2
			event = fc.Conditioned(fc.SetPersistent("AVAS_Call_Sound", "ASET/ASET_Props/Sounds/gpws/gpws2") and fc.SetPersistent("AVAS_Annunciation_On",1))
			exitEvent = fc.SetPersistent("AVAS_Annunciation_On", 0)
			variable = fc.Conditioned(fc.AltitudeBottom() < 2.5 and fc.AltitudeBottom() > 1.5 and fc.GetPersistentAsNumber("AVAS_ON") and fc.GetLaunchClampCount() == 0)
		}
		
		TRIGGER_EVENT
		{
			name = AVASCall5
			event = fc.Conditioned(fc.SetPersistent("AVAS_Call_Sound", "ASET/ASET_Props/Sounds/gpws/gpws5") and fc.SetPersistent("AVAS_Annunciation_On",1))
			exitEvent = fc.SetPersistent("AVAS_Annunciation_On", 0)
			variable = fc.Conditioned(fc.AltitudeBottom() < 6 and fc.AltitudeBottom() > 4  and fc.GetPersistentAsNumber("AVAS_ON") and fc.GetLaunchClampCount() == 0)
		}
		
		TRIGGER_EVENT
		{
			name = AVASCall10
			event = fc.Conditioned(fc.SetPersistent("AVAS_Call_Sound", "ASET/ASET_Props/Sounds/gpws/gpws10") and fc.SetPersistent("AVAS_Annunciation_On",1))
			exitEvent = fc.SetPersistent("AVAS_Annunciation_On", 0)
			variable = fc.Conditioned(fc.AltitudeBottom() < 12 and fc.AltitudeBottom() > 8  and fc.GetPersistentAsNumber("AVAS_ON") and fc.GetLaunchClampCount() == 0)
		}
		
		TRIGGER_EVENT
		{
			name = AVASCall20
			event = fc.Conditioned(fc.SetPersistent("AVAS_Call_Sound", "ASET/ASET_Props/Sounds/gpws/gpws20") and fc.SetPersistent("AVAS_Annunciation_On",1))
			exitEvent = fc.SetPersistent("AVAS_Annunciation_On", 0)
			variable = fc.Conditioned(fc.AltitudeBottom() < 22 and fc.AltitudeBottom() > 18  and fc.GetPersistentAsNumber("AVAS_ON") and fc.GetLaunchClampCount() == 0)
		}
		
		TRIGGER_EVENT
		{
			name = AVASCall25
			event = fc.Conditioned(fc.SetPersistent("AVAS_Call_Sound", "ASET/ASET_Props/Sounds/gpws/gpws25") and fc.SetPersistent("AVAS_Annunciation_On",1))
			exitEvent = fc.SetPersistent("AVAS_Annunciation_On", 0)
			variable = fc.Conditioned(fc.AltitudeBottom() < 27 and fc.AltitudeBottom() > 23  and fc.GetPersistentAsNumber("AVAS_ON") and fc.GetLaunchClampCount() == 0)
		}
		
		TRIGGER_EVENT
		{
			name = AVASCall50
			event = fc.Conditioned(fc.SetPersistent("AVAS_Call_Sound", "ASET/ASET_Props/Sounds/gpws/gpws50") and fc.SetPersistent("AVAS_Annunciation_On",1))
			exitEvent = fc.SetPersistent("AVAS_Annunciation_On", 0)
			variable = fc.Conditioned(fc.AltitudeBottom() < 52 and fc.AltitudeBottom() > 48  and fc.GetPersistentAsNumber("AVAS_ON") and fc.GetLaunchClampCount() == 0)
		}
		
		TRIGGER_EVENT
		{
			name = AVASCall100
			event = fc.Conditioned(fc.SetPersistent("AVAS_Call_Sound", "ASET/ASET_Props/Sounds/gpws/gpws100") and fc.SetPersistent("AVAS_Annunciation_On",1))
			exitEvent = fc.SetPersistent("AVAS_Annunciation_On", 0)
			variable = fc.Conditioned(fc.AltitudeBottom() < 105 and fc.AltitudeBottom() > 95  and fc.GetPersistentAsNumber("AVAS_ON"))
		}
		
		TRIGGER_EVENT
		{
			name = AVASCall200
			event = fc.Conditioned(fc.SetPersistent("AVAS_Call_Sound", "ASET/ASET_Props/Sounds/gpws/gpws200") and fc.SetPersistent("AVAS_Annunciation_On",1))
			exitEvent = fc.SetPersistent("AVAS_Annunciation_On", 0)
			variable = fc.Conditioned(fc.AltitudeBottom() < 205 and fc.AltitudeBottom() > 195  and fc.GetPersistentAsNumber("AVAS_ON"))
		}
		
		TRIGGER_EVENT
		{
			name = AVASCall300
			event = fc.Conditioned(fc.SetPersistent("AVAS_Call_Sound", "ASET/ASET_Props/Sounds/gpws/gpws300") and fc.SetPersistent("AVAS_Annunciation_On",1))
			exitEvent = fc.SetPersistent("AVAS_Annunciation_On", 0)
			variable = fc.Conditioned(fc.AltitudeBottom() < 305 and fc.AltitudeBottom() > 295  and fc.GetPersistentAsNumber("AVAS_ON"))
		}
		
		TRIGGER_EVENT
		{
			name = AVASCall400
			event = fc.Conditioned(fc.SetPersistent("AVAS_Call_Sound", "ASET/ASET_Props/Sounds/gpws/gpws400") and fc.SetPersistent("AVAS_Annunciation_On",1))
			exitEvent = fc.SetPersistent("AVAS_Annunciation_On", 0)
			variable = fc.Conditioned(fc.AltitudeBottom() < 405 and fc.AltitudeBottom() > 395  and fc.GetPersistentAsNumber("AVAS_ON"))
		}
		
		TRIGGER_EVENT
		{
			name = AVASCall500
			event = fc.Conditioned(fc.SetPersistent("AVAS_Call_Sound", "ASET/ASET_Props/Sounds/gpws/gpws500") and fc.SetPersistent("AVAS_Annunciation_On",1))
			exitEvent = fc.SetPersistent("AVAS_Annunciation_On", 0)
			variable = fc.Conditioned(fc.AltitudeBottom() < 505 and fc.AltitudeBottom() > 495  and fc.GetPersistentAsNumber("AVAS_ON"))
		}
		
		TRIGGER_EVENT
		{
			name = AVASCall1000
			event = fc.Conditioned(fc.SetPersistent("AVAS_Call_Sound", "ASET/ASET_Props/Sounds/gpws/gpws1000") and fc.SetPersistent("AVAS_Annunciation_On",1))
			exitEvent = fc.SetPersistent("AVAS_Annunciation_On", 0)
			variable = fc.Conditioned(fc.AltitudeTerrain(false) < 1010 and fc.AltitudeTerrain(false) > 990  and fc.GetPersistentAsNumber("AVAS_ON"))
		}
		
		TRIGGER_EVENT
		{
			name = AVASCall1500
			event = fc.Conditioned(fc.SetPersistent("AVAS_Call_Sound", "ASET/ASET_Props/Sounds/gpws/gpws1500") and fc.SetPersistent("AVAS_Annunciation_On",1))
			exitEvent = fc.SetPersistent("AVAS_Annunciation_On", 0)
			variable = fc.Conditioned(fc.AltitudeTerrain(false) < 1510 and fc.AltitudeTerrain(false) > 1490  and fc.GetPersistentAsNumber("AVAS_ON"))
		}
		
		TRIGGER_EVENT
		{
			name = AVASCall2000
			event = fc.Conditioned(fc.SetPersistent("AVAS_Call_Sound", "ASET/ASET_Props/Sounds/gpws/gpws2000") and fc.SetPersistent("AVAS_Annunciation_On",1))
			exitEvent = fc.SetPersistent("AVAS_Annunciation_On", 0)
			variable = fc.Conditioned(fc.AltitudeTerrain(false) < 2030 and fc.AltitudeTerrain(false) > 1970  and fc.GetPersistentAsNumber("AVAS_ON"))
		}
		
		TRIGGER_EVENT
		{
			name = AVASCall2500
			event = fc.Conditioned(fc.SetPersistent("AVAS_Call_Sound", "ASET/ASET_Props/Sounds/gpws/gpws2500") and fc.SetPersistent("AVAS_Annunciation_On",1))
			exitEvent = fc.SetPersistent("AVAS_Annunciation_On", 0)
			variable = fc.Conditioned(fc.AltitudeTerrain(false) < 2530 and fc.AltitudeTerrain(false) > 2470  and fc.GetPersistentAsNumber("AVAS_ON"))
		}
		
		TRIGGER_EVENT
		{
			name = AVASCall3000
			event = fc.Conditioned(fc.SetPersistent("AVAS_Call_Sound", "ASET/ASET_Props/Sounds/gpws/gpws3000") and fc.SetPersistent("AVAS_Annunciation_On",1))
			exitEvent = fc.SetPersistent("AVAS_Annunciation_On", 0)
			variable = fc.Conditioned(fc.AltitudeTerrain(false) < 3030 and fc.AltitudeTerrain(false) > 2970  and fc.GetPersistentAsNumber("AVAS_ON"))
		}
		
		TRIGGER_EVENT
		{
			name = AVASCall4000
			event = fc.Conditioned(fc.SetPersistent("AVAS_Call_Sound", "ASET/ASET_Props/Sounds/gpws/gpws4000") and fc.SetPersistent("AVAS_Annunciation_On",1))
			exitEvent = fc.SetPersistent("AVAS_Annunciation_On", 0)
			variable = fc.Conditioned(fc.AltitudeTerrain(false) < 4030 and fc.AltitudeTerrain(false) > 3970  and fc.GetPersistentAsNumber("AVAS_ON"))
		}
		
		TRIGGER_EVENT
		{
			name = AVASCall5000
			event = fc.Conditioned(fc.SetPersistent("AVAS_Call_Sound", "ASET/ASET_Props/Sounds/gpws/gpws5000") and fc.SetPersistent("AVAS_Annunciation_On",1))
			exitEvent = fc.SetPersistent("AVAS_Annunciation_On", 0)
			variable = fc.Conditioned(fc.AltitudeTerrain(false) < 5030 and fc.AltitudeTerrain(false) > 4970  and fc.GetPersistentAsNumber("AVAS_ON"))
		}
		
		TRIGGER_EVENT
		{
			name = AVASCall10000
			event = fc.Conditioned(fc.SetPersistent("AVAS_Call_Sound", "ASET/ASET_Props/Sounds/gpws/gpws10000") and fc.SetPersistent("AVAS_Annunciation_On",1))
			exitEvent = fc.SetPersistent("AVAS_Annunciation_On", 0)
			variable = fc.Conditioned(fc.AltitudeTerrain(false) < 10030 and fc.AltitudeTerrain(false) > 9970  and fc.GetPersistentAsNumber("AVAS_ON"))
		}
		
		TRIGGER_EVENT
		{
			name = AVASCall20000
			event = fc.Conditioned(fc.SetPersistent("AVAS_Call_Sound", "ASET/ASET_Props/Sounds/gpws/gpws20000") and fc.SetPersistent("AVAS_Annunciation_On",1))
			exitEvent = fc.SetPersistent("AVAS_Annunciation_On", 0)
			variable = fc.Conditioned(fc.AltitudeTerrain(false) < 20030 and fc.AltitudeTerrain(false) > 19970  and fc.GetPersistentAsNumber("AVAS_ON"))
		}

	}
}
